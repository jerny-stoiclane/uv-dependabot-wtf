import {
  isToday,
  max,
  min
} from "./chunk-KADPXDK7.js";
import {
  require_ChevronLeft
} from "./chunk-4AMAILBC.js";
import {
  addDays,
  addMonths,
  addWeeks,
  addYears,
  differenceInCalendarMonths,
  endOfMonth,
  endOfWeek,
  endOfYear,
  format,
  getDate,
  getMonth,
  getYear,
  isAfter,
  isBefore,
  isSameDay,
  isSameMonth,
  isValid,
  isWithinInterval,
  parseISO,
  setMonth,
  setYear,
  startOfMonth,
  startOfWeek,
  startOfYear
} from "./chunk-THJHV4YG.js";
import {
  require_ChevronRight
} from "./chunk-5PBDBVU4.js";
import {
  require_createSvgIcon,
  require_interopRequireDefault
} from "./chunk-H4LG5MUG.js";
import {
  Grid_default
} from "./chunk-XVODMHZS.js";
import "./chunk-CRCABNPL.js";
import {
  ListItem_default
} from "./chunk-VGSWTNUG.js";
import "./chunk-X6BQBKF3.js";
import "./chunk-XRTPVPL2.js";
import "./chunk-466BSGQO.js";
import "./chunk-HIQG56AD.js";
import {
  Divider_default,
  ListItemText_default,
  MenuItem_default
} from "./chunk-LR4SANM6.js";
import {
  FormControl_default,
  List_default,
  Select_default
} from "./chunk-BXFWYPGN.js";
import "./chunk-Z63KYTRJ.js";
import {
  Box_default
} from "./chunk-CJDQ56NQ.js";
import "./chunk-G3RGOXWZ.js";
import "./chunk-3H5WDWCP.js";
import "./chunk-4R7ZRG4I.js";
import "./chunk-2OPT7FNK.js";
import "./chunk-GGM7W32Y.js";
import "./chunk-HKQICAMA.js";
import {
  IconButton_default,
  Paper_default
} from "./chunk-3A7UA6DA.js";
import "./chunk-NJ7MTKO6.js";
import "./chunk-RU752BG3.js";
import "./chunk-DVAAXU73.js";
import {
  Typography_default
} from "./chunk-KB3VYW2L.js";
import "./chunk-KI6OQLKL.js";
import "./chunk-AEAVRY3E.js";
import "./chunk-GJ64NK6I.js";
import "./chunk-ZEES7GRY.js";
import "./chunk-6GQZJODJ.js";
import "./chunk-XTYVK3QF.js";
import "./chunk-TV3E6SJK.js";
import "./chunk-4CXRFQSJ.js";
import "./chunk-QHQ7WF4G.js";
import "./chunk-7HSHTQGL.js";
import "./chunk-4JVHZQ62.js";
import {
  require_jsx_runtime
} from "./chunk-PLSASLVR.js";
import "./chunk-JUDHQGK3.js";
import "./chunk-I5OU7BRI.js";
import "./chunk-55S4GTF6.js";
import "./chunk-XCIYEHU5.js";
import "./chunk-SEZSDJBN.js";
import "./chunk-QH3ARGD3.js";
import "./chunk-43KTCWNF.js";
import {
  require_react
} from "./chunk-KKLIGSHV.js";
import {
  __commonJS,
  __toESM
} from "./chunk-GFT2G5UO.js";

// ../../node_modules/@mui/icons-material/ArrowRightAlt.js
var require_ArrowRightAlt = __commonJS({
  "../../node_modules/@mui/icons-material/ArrowRightAlt.js"(exports) {
    "use strict";
    var _interopRequireDefault = require_interopRequireDefault();
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = void 0;
    var _createSvgIcon = _interopRequireDefault(require_createSvgIcon());
    var _jsxRuntime = require_jsx_runtime();
    var _default = (0, _createSvgIcon.default)((0, _jsxRuntime.jsx)("path", {
      d: "M16.01 11H4v2h12.01v3L20 12l-3.99-4z"
    }), "ArrowRightAlt");
    exports.default = _default;
  }
});

// ../../node_modules/mui-daterange-picker/dist/index.es.js
var React = __toESM(require_react());
var import_react = __toESM(require_react());
var import_ArrowRightAlt = __toESM(require_ArrowRightAlt());
var import_ChevronLeft = __toESM(require_ChevronLeft());
var import_ChevronRight = __toESM(require_ChevronRight());
var chunks = (array, size) => Array.from({ length: Math.ceil(array.length / size) }, (_v, i) => array.slice(i * size, i * size + size));
var getDaysInMonth = (date, locale) => {
  const startWeek = startOfWeek(startOfMonth(date), { locale });
  const endWeek = endOfWeek(endOfMonth(date), { locale });
  const days = [];
  for (let curr = startWeek; isBefore(curr, endWeek); ) {
    days.push(curr);
    curr = addDays(curr, 1);
  }
  return days;
};
var isStartOfRange = ({ startDate }, day) => startDate && isSameDay(day, startDate);
var isEndOfRange = ({ endDate }, day) => endDate && isSameDay(day, endDate);
var inDateRange = ({ startDate, endDate }, day) => startDate && endDate && (isWithinInterval(day, { start: startDate, end: endDate }) || isSameDay(day, startDate) || isSameDay(day, endDate));
var isRangeSameDay = ({ startDate, endDate }) => {
  if (startDate && endDate) {
    return isSameDay(startDate, endDate);
  }
  return false;
};
var parseOptionalDate = (date, defaultValue) => {
  if (date) {
    const parsed = date instanceof Date ? date : parseISO(date);
    if (isValid(parsed))
      return parsed;
  }
  return defaultValue;
};
var getValidatedMonths = (range, minDate, maxDate) => {
  const { startDate, endDate } = range;
  if (startDate && endDate) {
    const newStart = max([startDate, minDate]);
    const newEnd = min([endDate, maxDate]);
    return [newStart, isSameMonth(newStart, newEnd) ? addMonths(newStart, 1) : newEnd];
  }
  return [startDate, endDate];
};
var getDefaultRanges = (date, locale) => [
  {
    label: "Today",
    startDate: date,
    endDate: date
  },
  {
    label: "Yesterday",
    startDate: addDays(date, -1),
    endDate: addDays(date, -1)
  },
  {
    label: "This Week",
    startDate: startOfWeek(date, { locale }),
    endDate: endOfWeek(date, { locale })
  },
  {
    label: "Last Week",
    startDate: startOfWeek(addWeeks(date, -1), { locale }),
    endDate: endOfWeek(addWeeks(date, -1), { locale })
  },
  {
    label: "Last 7 Days",
    startDate: addWeeks(date, -1),
    endDate: date
  },
  {
    label: "This Month",
    startDate: startOfMonth(date),
    endDate: endOfMonth(date)
  },
  {
    label: "Last Month",
    startDate: startOfMonth(addMonths(date, -1)),
    endDate: endOfMonth(addMonths(date, -1))
  },
  {
    label: "This Year",
    startDate: startOfYear(date),
    endDate: endOfYear(date)
  },
  {
    label: "Last Year",
    startDate: startOfYear(addYears(date, -1)),
    endDate: endOfYear(addYears(date, -1))
  }
];
var generateYears = (relativeTo, count) => {
  const half = Math.floor(count / 2);
  return Array(count).fill(0).map((_y, i) => relativeTo.getFullYear() - half + i);
};
var Header = ({ date, setDate, nextDisabled, prevDisabled, onClickNext, onClickPrevious, locale }) => {
  const MONTHS = typeof locale !== "undefined" ? [...Array(12).keys()].map((d) => {
    var _a;
    return (_a = locale.localize) === null || _a === void 0 ? void 0 : _a.month(d, { width: "abbreviated", context: "standalone" });
  }) : ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sept", "Oct", "Nov", "Dec"];
  const handleMonthChange = (event) => {
    setDate(setMonth(date, parseInt(event.target.value, 10)));
  };
  const handleYearChange = (event) => {
    setDate(setYear(date, parseInt(event.target.value, 10)));
  };
  return import_react.default.createElement(
    Grid_default,
    { container: true, justifyContent: "space-between", alignItems: "center" },
    import_react.default.createElement(
      Grid_default,
      { item: true, sx: { padding: "5px" } },
      import_react.default.createElement(
        IconButton_default,
        { sx: {
          padding: "10px",
          "&:hover": {
            background: "none"
          }
        }, disabled: prevDisabled, onClick: onClickPrevious },
        import_react.default.createElement(import_ChevronLeft.default, { color: prevDisabled ? "disabled" : "action" })
      )
    ),
    import_react.default.createElement(
      Grid_default,
      { item: true },
      import_react.default.createElement(
        FormControl_default,
        { variant: "standard" },
        import_react.default.createElement(Select_default, { value: getMonth(date), onChange: handleMonthChange, MenuProps: { disablePortal: true } }, MONTHS.map((month, idx) => import_react.default.createElement(MenuItem_default, { key: month, value: idx }, month)))
      )
    ),
    import_react.default.createElement(
      Grid_default,
      { item: true },
      import_react.default.createElement(
        FormControl_default,
        { variant: "standard" },
        import_react.default.createElement(Select_default, { value: getYear(date), onChange: handleYearChange, MenuProps: { disablePortal: true } }, generateYears(date, 30).map((year) => import_react.default.createElement(MenuItem_default, { key: year, value: year }, year)))
      )
    ),
    import_react.default.createElement(
      Grid_default,
      { item: true, sx: { padding: "5px" } },
      import_react.default.createElement(
        IconButton_default,
        { sx: {
          padding: "10px",
          "&:hover": {
            background: "none"
          }
        }, disabled: nextDisabled, onClick: onClickNext },
        import_react.default.createElement(import_ChevronRight.default, { color: nextDisabled ? "disabled" : "action" })
      )
    )
  );
};
var Day = ({ startOfRange, endOfRange, disabled, highlighted, outlined, filled, onClick, onHover, value }) => {
  return import_react.default.createElement(
    Box_default,
    { sx: {
      display: "flex",
      // eslint-disable-next-line no-nested-ternary
      borderRadius: startOfRange ? "50% 0 0 50%" : endOfRange ? "0 50% 50% 0" : void 0,
      backgroundColor: (theme) => !disabled && highlighted ? theme.palette.primary.light : void 0
    } },
    import_react.default.createElement(
      IconButton_default,
      { sx: Object.assign({ height: "36px", width: "36px", padding: 0, border: (theme) => !disabled && outlined ? `1px solid ${theme.palette.primary.dark}` : void 0 }, !disabled && filled ? {
        "&:hover": {
          backgroundColor: (theme) => theme.palette.primary.dark
        },
        backgroundColor: (theme) => theme.palette.primary.dark
      } : {}), disabled, onClick, onMouseOver: onHover },
      import_react.default.createElement(Typography_default, { sx: {
        lineHeight: 1.6,
        color: (theme) => !disabled ? filled ? theme.palette.primary.contrastText : theme.palette.text.primary : theme.palette.text.secondary
      }, variant: "body2" }, value)
    )
  );
};
var NavigationAction;
(function(NavigationAction2) {
  NavigationAction2[NavigationAction2["Previous"] = -1] = "Previous";
  NavigationAction2[NavigationAction2["Next"] = 1] = "Next";
})(NavigationAction || (NavigationAction = {}));
var Month = (props) => {
  var _a;
  const { helpers, handlers, value: date, dateRange, marker, setValue: setDate, minDate, maxDate, locale } = props;
  const weekStartsOn = ((_a = locale === null || locale === void 0 ? void 0 : locale.options) === null || _a === void 0 ? void 0 : _a.weekStartsOn) || 0;
  const WEEK_DAYS = typeof locale !== "undefined" ? [...Array(7).keys()].map((d) => {
    var _a2;
    return (_a2 = locale.localize) === null || _a2 === void 0 ? void 0 : _a2.day((d + weekStartsOn) % 7, { width: "short", context: "standalone" });
  }) : ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];
  const [back, forward] = props.navState;
  return import_react.default.createElement(
    Paper_default,
    { square: true, elevation: 0, sx: { width: 290 } },
    import_react.default.createElement(
      Grid_default,
      { container: true },
      import_react.default.createElement(Header, { date, setDate, nextDisabled: !forward, prevDisabled: !back, onClickPrevious: () => handlers.onMonthNavigate(marker, NavigationAction.Previous), onClickNext: () => handlers.onMonthNavigate(marker, NavigationAction.Next), locale }),
      import_react.default.createElement(Grid_default, { item: true, container: true, direction: "row", justifyContent: "space-between", sx: {
        marginTop: "10px",
        paddingLeft: "30px",
        paddingRight: "30px"
      } }, WEEK_DAYS.map((day, index) => import_react.default.createElement(Typography_default, { color: "textSecondary", key: index, variant: "caption" }, day))),
      import_react.default.createElement(Grid_default, { item: true, container: true, direction: "column", justifyContent: "space-between", sx: {
        paddingLeft: "15px",
        paddingRight: "15px",
        marginTop: "15px",
        marginBottom: "20px"
      } }, chunks(getDaysInMonth(date, locale), 7).map((week, idx) => import_react.default.createElement(Grid_default, { key: idx, container: true, direction: "row", justifyContent: "center" }, week.map((day) => {
        const isStart = isStartOfRange(dateRange, day);
        const isEnd = isEndOfRange(dateRange, day);
        const isRangeOneDay = isRangeSameDay(dateRange);
        const highlighted = inDateRange(dateRange, day) || helpers.inHoverRange(day);
        return import_react.default.createElement(Day, { key: format(day, "dd-MM-yyyy"), filled: isStart || isEnd, outlined: isToday(day), highlighted: highlighted && !isRangeOneDay, disabled: !isSameMonth(date, day) || !isWithinInterval(day, { start: minDate, end: maxDate }), startOfRange: isStart && !isRangeOneDay, endOfRange: isEnd && !isRangeOneDay, onClick: () => handlers.onDayClick(day), onHover: () => handlers.onDayHover(day), value: getDate(day) });
      }))))
    )
  );
};
var isSameRange = (first, second) => {
  const { startDate: fStart, endDate: fEnd } = first;
  const { startDate: sStart, endDate: sEnd } = second;
  if (fStart && sStart && fEnd && sEnd) {
    return isSameDay(fStart, sStart) && isSameDay(fEnd, sEnd);
  }
  return false;
};
var DefinedRanges = ({ ranges, setRange, selectedRange }) => import_react.default.createElement(List_default, null, ranges.map((range, idx) => import_react.default.createElement(
  ListItem_default,
  { button: true, key: idx, onClick: () => setRange(range), sx: [
    isSameRange(range, selectedRange) && {
      backgroundColor: (theme) => theme.palette.primary.dark,
      color: "primary.contrastText",
      "&:hover": {
        color: "inherit"
      }
    }
  ] },
  import_react.default.createElement(ListItemText_default, { primaryTypographyProps: {
    variant: "body2",
    sx: {
      fontWeight: isSameRange(range, selectedRange) ? "bold" : "normal"
    }
  } }, range.label)
)));
var MARKERS = {
  FIRST_MONTH: Symbol("firstMonth"),
  SECOND_MONTH: Symbol("secondMonth")
};
var Menu = (props) => {
  const { ranges, dateRange, minDate, maxDate, firstMonth, setFirstMonth, secondMonth, setSecondMonth, setDateRange, helpers, handlers, locale } = props;
  const { startDate, endDate } = dateRange;
  const canNavigateCloser = differenceInCalendarMonths(secondMonth, firstMonth) >= 2;
  const commonProps = {
    dateRange,
    minDate,
    maxDate,
    helpers,
    handlers
  };
  return import_react.default.createElement(
    Paper_default,
    { elevation: 5, square: true },
    import_react.default.createElement(
      Grid_default,
      { container: true, direction: "row", wrap: "nowrap" },
      import_react.default.createElement(
        Grid_default,
        null,
        import_react.default.createElement(DefinedRanges, { selectedRange: dateRange, ranges, setRange: setDateRange })
      ),
      import_react.default.createElement(Divider_default, { orientation: "vertical", flexItem: true }),
      import_react.default.createElement(
        Grid_default,
        null,
        import_react.default.createElement(
          Grid_default,
          { container: true, sx: { padding: "20px 70px" }, alignItems: "center" },
          import_react.default.createElement(
            Grid_default,
            { item: true, sx: { flex: 1, textAlign: "center" } },
            import_react.default.createElement(Typography_default, { variant: "subtitle1" }, startDate ? format(startDate, "dd MMMM yyyy", { locale }) : "Start Date")
          ),
          import_react.default.createElement(
            Grid_default,
            { item: true, sx: { flex: 1, textAlign: "center" } },
            import_react.default.createElement(import_ArrowRightAlt.default, { color: "action" })
          ),
          import_react.default.createElement(
            Grid_default,
            { item: true, sx: { flex: 1, textAlign: "center" } },
            import_react.default.createElement(Typography_default, { variant: "subtitle1" }, endDate ? format(endDate, "dd MMMM yyyy", { locale }) : "End Date")
          )
        ),
        import_react.default.createElement(Divider_default, null),
        import_react.default.createElement(
          Grid_default,
          { container: true, direction: "row", justifyContent: "center", wrap: "nowrap" },
          import_react.default.createElement(Month, Object.assign({}, commonProps, { value: firstMonth, setValue: setFirstMonth, navState: [true, canNavigateCloser], marker: MARKERS.FIRST_MONTH, locale })),
          import_react.default.createElement(Divider_default, { orientation: "vertical", flexItem: true }),
          import_react.default.createElement(Month, Object.assign({}, commonProps, { value: secondMonth, setValue: setSecondMonth, navState: [canNavigateCloser, true], marker: MARKERS.SECOND_MONTH, locale }))
        )
      )
    )
  );
};
var DateRangePicker = (props) => {
  const today = /* @__PURE__ */ new Date();
  const { open, onChange, initialDateRange, minDate, maxDate, definedRanges = getDefaultRanges(/* @__PURE__ */ new Date(), props.locale), locale } = props;
  const minDateValid = parseOptionalDate(minDate, addYears(today, -10));
  const maxDateValid = parseOptionalDate(maxDate, addYears(today, 10));
  const [intialFirstMonth, initialSecondMonth] = getValidatedMonths(initialDateRange || {}, minDateValid, maxDateValid);
  const [dateRange, setDateRange] = React.useState(Object.assign({}, initialDateRange));
  const [hoverDay, setHoverDay] = React.useState();
  const [firstMonth, setFirstMonth] = React.useState(intialFirstMonth || today);
  const [secondMonth, setSecondMonth] = React.useState(initialSecondMonth || addMonths(firstMonth, 1));
  const { startDate, endDate } = dateRange;
  const setFirstMonthValidated = (date) => {
    if (isBefore(date, secondMonth)) {
      setFirstMonth(date);
    }
  };
  const setSecondMonthValidated = (date) => {
    if (isAfter(date, firstMonth)) {
      setSecondMonth(date);
    }
  };
  const setDateRangeValidated = (range) => {
    let { startDate: newStart, endDate: newEnd } = range;
    if (newStart && newEnd) {
      range.startDate = newStart = max([newStart, minDateValid]);
      range.endDate = newEnd = min([newEnd, maxDateValid]);
      setDateRange(range);
      onChange(range);
      setFirstMonth(newStart);
      setSecondMonth(isSameMonth(newStart, newEnd) ? addMonths(newStart, 1) : newEnd);
    } else {
      const emptyRange = {};
      setDateRange(emptyRange);
      onChange(emptyRange);
      setFirstMonth(today);
      setSecondMonth(addMonths(firstMonth, 1));
    }
  };
  const onDayClick = (day) => {
    if (startDate && !endDate && !isBefore(day, startDate)) {
      const newRange = { startDate, endDate: day };
      onChange(newRange);
      setDateRange(newRange);
    } else {
      setDateRange({ startDate: day, endDate: void 0 });
    }
    setHoverDay(day);
  };
  const onMonthNavigate = (marker, action) => {
    if (marker === MARKERS.FIRST_MONTH) {
      const firstNew = addMonths(firstMonth, action);
      if (isBefore(firstNew, secondMonth))
        setFirstMonth(firstNew);
    } else {
      const secondNew = addMonths(secondMonth, action);
      if (isBefore(firstMonth, secondNew))
        setSecondMonth(secondNew);
    }
  };
  const onDayHover = (date) => {
    if (startDate && !endDate) {
      if (!hoverDay || !isSameDay(date, hoverDay)) {
        setHoverDay(date);
      }
    }
  };
  const inHoverRange = (day) => startDate && !endDate && hoverDay && isAfter(hoverDay, startDate) && isWithinInterval(day, { start: startDate, end: hoverDay });
  const helpers = {
    inHoverRange
  };
  const handlers = {
    onDayClick,
    onDayHover,
    onMonthNavigate
  };
  return open ? React.createElement(Menu, { dateRange, minDate: minDateValid, maxDate: maxDateValid, ranges: definedRanges, firstMonth, secondMonth, setFirstMonth: setFirstMonthValidated, setSecondMonth: setSecondMonthValidated, setDateRange: setDateRangeValidated, helpers, handlers, locale }) : null;
};
var DateRangePickerWrapper = (props) => {
  const { closeOnClickOutside, wrapperClassName, toggle, open } = props;
  const handleToggle = () => {
    if (closeOnClickOutside === false) {
      return;
    }
    toggle();
  };
  const handleKeyPress = (event) => (event === null || event === void 0 ? void 0 : event.key) === "Escape" && handleToggle();
  return import_react.default.createElement(
    Box_default,
    { sx: { position: "relative" } },
    open && import_react.default.createElement(Box_default, { sx: {
      position: "fixed",
      height: "100vh",
      width: "100vw",
      bottom: 0,
      zIndex: 0,
      right: 0,
      left: 0,
      top: 0
    }, onKeyPress: handleKeyPress, onClick: handleToggle }),
    import_react.default.createElement(
      Box_default,
      { sx: { position: "relative", zIndex: 1 }, className: wrapperClassName },
      import_react.default.createElement(DateRangePicker, Object.assign({}, props))
    )
  );
};
var DateRangePickerExporter = (props) => import_react.default.createElement(DateRangePickerWrapper, Object.assign({}, props));
export {
  DateRangePickerExporter as DateRangePicker,
  DateRangePicker as DateRangePickerComponent
};
//# sourceMappingURL=mui-daterange-picker.js.map
